<p id="notice"><%= notice %></p>
<div class="container">
  <div class="container-custom grey-border p-3">
  <div class="col">
      <h5>Address: </h5><h4><%= link_to @property.address, @property %></h4>
    <div class="grey-text">Created <%= time_ago_in_words(@property.created_at) %> ago, 
      by  <%= @property.user_id  && @property.user.nickname%>. 
      <% if @property.updated_at != @property.created_at %> <!-- Showing updates only when updates are made -->
        Edited <%= time_ago_in_words(@property.updated_at)%> ago
      <% end%>
    </div>


    <%# Render the reviews %>

      <p> <%= @property.reviews.count %> Reviews </p>
      <% if @property.reviews.present? %>
        <%= render @property.reviews%>
      <% else %>
        <h4>No reviews yet</h4>
      <% end %>


      <% if current_user %>
          <div class="container">
            <div class="row red-text" >
              Rating:&nbsp <%= rating_for @property, "property_score",
              readOnly: true,
              path: 'star_icons',
              enable_half: true,
              cancel_place: 'right'
                    %>
            </div>
          </div>
      <% end %>

      <%# Render the form for reviews %>
      <h4> Leave a review: </h4>
      <%= render "reviews/form" %>

      <%= link_to 'Edit', edit_property_path(@property) %> |
      <%= link_to 'Back', properties_path %>
    </div>
  </div>
</div>

<%= javascript_include_tag 'ratyrate.js', "data-turbolinks-track": false %> 